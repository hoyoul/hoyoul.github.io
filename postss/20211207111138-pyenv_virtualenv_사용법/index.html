<!DOCTYPE html>
<html>
  <head><title>pyenv-virtualenv 사용법</title>


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes" />

<link rel="shortcut icon" href="./img/favicon.ico" type="image/x-icon">
<link rel="icon" href="./img/favicon.ico" type="image/x-icon">    

<link rel="stylesheet" href="/css/main.css">

</head>
  <body><header>
  <a href="/" id="logo">
    <img src="http://braindump.frege2godel.me/img/mylogo.png" alt="holy frege">
    <h3><span>H</span>oly <span>F</span>rege's <span id="note">notes</span></h3>
  </a>
    <small>G.frege를 너무 사랑하는 holy가...</small>  
</header>

<div class="container">
  <div class="page">
    <h1 class="collapsed-title">pyenv-virtualenv 사용법</h1>    
      <div class="content">
	<a href="http://braindump.frege2godel.me/postss/20211207111138-pyenv_virtualenv_%E1%84%89%E1%85%A1%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%87%E1%85%A5%E1%86%B8/" alt="pyenv-virtualenv 사용법" class="permalink"><h1>pyenv-virtualenv 사용법</h1></a>      
	<h2 id="사용-이유">사용 이유</h2>
<ul>
<li>python project마다 요구하는 python interpreter와 library의 version이 제각각임.</li>
<li>그런데 system에 설치한 python interpreter와 library의 version은 정해져 있음. project를 실행하기 위해서 요구하는 사항에 맞추어 다시  python과 library를 시스템에 재설치를 해야함.</li>
</ul>
<h2 id="원리">원리</h2>
<ul>
<li>pyenv -&gt; version설치 -&gt; 가상환경생성 -&gt; 적용할 디렉토리에 반영</li>
</ul>
<h2 id="설치-방법">설치 방법</h2>
<h3 id="version-설치">version 설치</h3>
<ul>
<li>
<p>(1) pyenv 설치</p>
</li>
<li>
<p>(2) pyenv path 설정 (.zshrc)</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>export PATH=&#34;~/.pyenv/bin:$PATH&#34;
</span></span><span style="display:flex;"><span>eval &#34;$(pyenv init -)&#34;
</span></span><span style="display:flex;"><span>eval &#34;$(pyenv virtualenv-init -)&#34;
</span></span></code></pre></div></li>
<li>
<p>(3) python version 설치</p>
<div class="note">
<ul>
<li>현재 설치되어 있는 버전 확인: pyenv versions</li>
<li>설치 가능한 버전 확인: pyenv install &ndash;list</li>
<li>버전 설치: pyenv install &lt;version&gt;</li>
<li>버전 삭제: pyenv uninstall &lt;version&gt;</li>
<li>버전 선택(system에 적용): pyenv global version</li>
<li>버전 선택(폴더에 적용): pyenv local version</li>
<li>version선택 대신 환경을 적용해도 된다.</li>
</ul>
</div>
</li>
</ul>
<h3 id="가상환경-설정">가상환경 설정</h3>
<ul>
<li>(1) pyenv virtualenv &lt;version&gt; RLPython</li>
</ul>
<h3 id="폴더에-가상환경-적용">폴더에 가상환경 적용</h3>
<ul>
<li>cd test</li>
<li>pyenv local RLPython</li>
</ul>
<h3 id="동작-확인해보자">동작 확인해보자</h3>
<ul>
<li>프롬프트에 (RLpython)이 보이면 된다.</li>
</ul>
<h2 id="예시-rl-케라스-설정-mac">예시 RL 케라스 설정 [Mac]</h2>
<div class="important">
<p>현재 mac m1은 python 3.9.1 이상만 pyenv로 설치된다. 그 이하는 설치되지 않는다.  3.8.6경우 아래와 같이 설치가 가능하나, 3.6.0의 경우는 아직 모르겠다.</p>
</div>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pyenv install --patch 3.8.6 &lt;&lt;(curl -sSL https://raw.githubusercontent.com/Homebrew/formula-patches/113aa84/python/3.8.6.patch\?full_index\=1)
</span></span></code></pre></div><ul>
<li>설치해야 할것들
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Python 3.6
</span></span><span style="display:flex;"><span>Tensorflow 2.1.0
</span></span><span style="display:flex;"><span>numpy 1.17.0
</span></span><span style="display:flex;"><span>gym 0.16.0
</span></span><span style="display:flex;"><span>pillow 6.1.0
</span></span><span style="display:flex;"><span>matplot 3.1.1
</span></span><span style="display:flex;"><span>scikit-image 0.15.0
</span></span></code></pre></div></li>
</ul>
<h3 id="python-version-설치">python version 설치</h3>
<ul>
<li>pyenv install 3.6.0</li>
</ul>
<h3 id="가상환경-설정">가상환경 설정</h3>
<ul>
<li>pyenv virtualenv 3.6.0 RLPython</li>
</ul>
<h2 id="예시-rl-케라스-설정-ubuntu">예시 RL 케라스 설정 [ubuntu]</h2>
<ul>
<li>AWS에서 EC2를 만들었다.</li>
<li>key는 .ssh/my_personal_key/아래 두었다.</li>
<li>ec2에 접속은 다음과 같이 한다.
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>​- 주소는 13.125.249.227이다.
</span></span><span style="display:flex;"><span>​- ssh -i .ssh/my_personal_key/&lt;키&gt; ubuntu@13.125.249.227로 접속한다.
</span></span></code></pre></div></li>
<li>root password를 설정한다. (!123qwe)</li>
<li>system에 python은 설치되어 있지만 pip는 없다. 설치해준다.
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>sudo apt-get install python3-pip python3-venv
</span></span></code></pre></div></li>
<li>build에 관련 잡다한것을 설치해주자.
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>sudo apt-get install -y make build-essential libssl-dev zlib1g-dev libbz2-dev \
</span></span><span style="display:flex;"><span>libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev \
</span></span><span style="display:flex;"><span>xz-utils tk-dev
</span></span></code></pre></div></li>
</ul>
<h3 id="pyenv-설치">pyenv  설치</h3>
<ul>
<li>git clone
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>git clone https://github.com/pyenv/pyenv.git ~/.pyenv
</span></span></code></pre></div></li>
<li>경로를 shell에 저장한다. 여기서 shims폴더가 경로에 없어서 제대로 동작을 하지 않을 수 있다. 추가해준다.
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ echo &#39;export PYENV_ROOT=&#34;$HOME/.pyenv&#34;&#39; &gt;&gt; ~/.bashrc
</span></span><span style="display:flex;"><span>$ echo &#39;export PATH=&#34;$PYENV_ROOT/shims:$PATH&#34;&#39; &gt;&gt; ~/.bashrc
</span></span><span style="display:flex;"><span>$ echo &#39;export PATH=&#34;$PYENV_ROOT/bin:$PATH&#34;&#39; &gt;&gt; ~/.bashrc
</span></span><span style="display:flex;"><span>$ echo -e &#39;if command -v pyenv 1&gt;/dev/null 2&gt;&amp;1; then\n  eval &#34;$(pyenv init -)&#34;\nfi&#39; &gt;&gt; ~/.bashrc
</span></span></code></pre></div></li>
<li>source ~/.bashrc</li>
<li>pyenv-virtualenv 설치</li>
<li>cd ~/.pyenv/plugins로 들어감</li>
<li>pyenv-virtualenv 설치
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>git clone https://github.com/yyuu/pyenv-virtualenv.git ~/.pyenv/plugins/pyenv-virtualenv
</span></span></code></pre></div></li>
<li>path 설정
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ echo &#39;eval &#34;$(pyenv virtualenv-init -)&#34;&#39; &gt;&gt; ~/.bashrc
</span></span><span style="display:flex;"><span>$ source ~/.bashrc
</span></span></code></pre></div></li>
</ul>
<h3 id="pyenv로-설치해야-할-것들">pyenv로 설치해야 할 것들</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Python 3.6
</span></span><span style="display:flex;"><span>Tensorflow 2.1.0
</span></span><span style="display:flex;"><span>numpy 1.17.0
</span></span><span style="display:flex;"><span>gym 0.16.0
</span></span><span style="display:flex;"><span>pillow 6.1.0
</span></span><span style="display:flex;"><span>matplot 3.1.1
</span></span><span style="display:flex;"><span>scikit-image 0.15.0
</span></span></code></pre></div><h3 id="pyenv-3-dot-6-dot-0-설치">pyenv 3.6.0 설치</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pyenv install 3.6.0
</span></span></code></pre></div><h3 id="pyenv-가상-환경-만들기-설정">pyenv 가상 환경 만들기,설정</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pyenv virtualenv 3.6.0 RLPython
</span></span></code></pre></div><h3 id="폴더에-적용">폴더에 적용</h3>
<ul>
<li>케라스에서 받은 소스를 git clone한다.</li>
<li>해당 폴더로 이동</li>
<li>pyenv local RLPython로 적용</li>
<li>prompt에 (RLPython)이 나오면 성공</li>
<li>python도 실행해보자. ubuntu default로 python은 없다. pyenv shims에 python이 있다. 그래서 shims의 python이 실행되는지 확인하는 것이다.</li>
</ul>
<h3 id="텐서플로우-2-dot-1-dot-0-설치">텐서플로우 2.1.0 설치</h3>
<ul>
<li>pip가 upgrade되지 않았다면, pip를 upgrade한다.
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pip install --ignore-installed --upgrade tensorflow==2.1.0
</span></span></code></pre></div></li>
</ul>
<h3 id="numpy-1-dot-17-dot-0-설치">numpy 1.17.0 설치</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pip install numpy==1.17.0
</span></span></code></pre></div><h3 id="gym-0-dot-16-dot-0-설치">gym 0.16.0 설치</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pip install gym==0.16.0
</span></span></code></pre></div><h3 id="pillow-6-dot-1-dot-0-설치">pillow 6.1.0 설치</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pip install pillow==6.1.0
</span></span></code></pre></div><h3 id="matplot-3-dot-1-dot-1-설치">matplot 3.1.1 설치</h3>
<ul>
<li>matplotlib으로 설치
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pip install matplotlib==3.1.1
</span></span></code></pre></div></li>
</ul>
<h3 id="scikit-image-0-dot-15-dot-0-설치">scikit-image 0.15.0 설치</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pip install scikit-image==0.15.0
</span></span></code></pre></div><h3 id="설치된-package의-확인">설치된 package의 확인</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pip freeze
</span></span></code></pre></div>      
      </div>
        
  
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
  

  

  </div>
</div>  

<script src="/js/URI.js" type="text/javascript"></script>
<script src="/js/page.js" type="text/javascript"></script>
</body>
</html>
