<!DOCTYPE html>
<html>
  <head><title>RestAPI SamsungBiotics 개발과정</title>


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes" />

<link rel="shortcut icon" href="./img/favicon.ico" type="image/x-icon">
<link rel="icon" href="./img/favicon.ico" type="image/x-icon">    

<link rel="stylesheet" href="/css/main.css">

</head>
  <body><header>
  <a href="/" id="logo">
    <img src="http://braindump.frege2godel.me/img/mylogo.png" alt="holy frege">
    <h3><span>H</span>oly <span>F</span>rege's <span id="note">notes</span></h3>
  </a>
    <small>G.frege를 너무 사랑하는 holy가...</small>  
</header>

<div class="container">
  <div class="page">
    <h1 class="collapsed-title">RestAPI SamsungBiotics 개발과정</h1>    
      <div class="content">
	<a href="http://braindump.frege2godel.me/postss/20211222151140-restapi_samsungbiotics_%E1%84%80%E1%85%A2%E1%84%87%E1%85%A1%E1%86%AF%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC/" alt="RestAPI SamsungBiotics 개발과정" class="permalink"><h1>RestAPI SamsungBiotics 개발과정</h1></a>      
	<h2 id="삼성-biotics-계정-생성">삼성 biotics 계정 생성</h2>
<ul>
<li>주소: <a href="https://61.75.178.52:28088/web/dist/index.html">https://61.75.178.52:28088/web/dist/index.html</a></li>
<li>해당 사이트에 들어갈수 있게 회원가입을 해줘야 한다.</li>
</ul>
<p><a id="figure--"></a></p>
<figure><img src="./img/biot1.png" width="400px" height="300px"/>
</figure>

<ul>
<li>id: <a href="mailto:pncltd@hanmail.net">pncltd@hanmail.net</a>
pw: pncltd755!</li>
</ul>
<h2 id="model-등록">Model 등록</h2>
<h3 id="model등록">model등록</h3>
<ul>
<li>model에서 등록을 누르고 아래와 같이 생성한다.</li>
</ul>
<p><a id="figure--"></a></p>
<figure><img src="./img/biot2.png"
         alt="Figure 1: biot2" width="400px" height="300px"/><figcaption>
            <p><span class="figure-number">Figure 1: </span>biot2</p>
        </figcaption>
</figure>

<h3 id="attribute등록">attribute등록</h3>
<ul>
<li>attribute에 해당하는 것들이 상당히 많은데, db값과 일치되어 있다.</li>
</ul>
<p><a id="figure--"></a></p>
<figure><img src="./img/attr1.png" width="400px" height="300px"/>
</figure>

<p><a id="figure--"></a></p>
<figure><img src="./img/attr2.png"
         alt="Figure 2: attr2" width="400px" height="300px"/><figcaption>
            <p><span class="figure-number">Figure 2: </span>attr2</p>
        </figcaption>
</figure>

<p><a id="figure--"></a></p>
<figure><img src="./img/attr3.png"
         alt="Figure 3: attr3" width="400px" height="300px"/><figcaption>
            <p><span class="figure-number">Figure 3: </span>attr3</p>
        </figcaption>
</figure>

<p><a id="figure--"></a></p>
<figure><img src="./img/attr4.png"
         alt="Figure 4: attr4" width="400px" height="300px"/><figcaption>
            <p><span class="figure-number">Figure 4: </span>attr4</p>
        </figcaption>
</figure>

<p><a id="figure--"></a></p>
<figure><img src="./img/attr5.png"
         alt="Figure 5: attr5" width="400px" height="300px"/><figcaption>
            <p><span class="figure-number">Figure 5: </span>attr5</p>
        </figcaption>
</figure>

<p><a id="figure--"></a></p>
<figure><img src="./img/attr6.png"
         alt="Figure 6: attr6" width="400px" height="300px"/><figcaption>
            <p><span class="figure-number">Figure 6: </span>attr6</p>
        </figcaption>
</figure>

<h3 id="thing정보">thing정보</h3>
<ul>
<li>아래 thing management를 설정하면 자동으로 설정된다.</li>
</ul>
<p><a id="figure--"></a></p>
<figure><img src="./img/thing.png"
         alt="Figure 7: thing" width="400px" height="300px"/><figcaption>
            <p><span class="figure-number">Figure 7: </span>thing</p>
        </figcaption>
</figure>

<h2 id="thing-management">thing management</h2>
<p><a id="figure--"></a></p>
<figure><img src="./img/thingmanage1.png"
         alt="Figure 8: thing management" width="400px" height="300px"/><figcaption>
            <p><span class="figure-number">Figure 8: </span>thing management</p>
        </figcaption>
</figure>

<h2 id="rest-api-처리">rest api 처리</h2>
<h3 id="login--최초-1회-authtoken을-받아온다-dot">login (최초 1회 authtoken을 받아온다.)</h3>
<ul>
<li>post방식으로 id와 pw를 전송해서 받는다. 주의해야 할것이 pw는 sha256으로 변환된 값을 넣어야 한다.</li>
<li>postman에서 테스트할 경우 3가지를 주의해야 한다.</li>
<li>[1] HEADERS 추가</li>
</ul>
<p><a id="figure--"></a></p>
<figure><img src="./img/login_header.png" width="400px" height="300px"/>
</figure>

<ul>
<li>[2] body format: raw와 json으로 변경</li>
</ul>
<p><a id="figure--"></a></p>
<figure><img src="./img/login_body.png" width="400px" height="300px"/>
</figure>

<ul>
<li>
<p>[2]번까지 하면 제대로 되어야 한다. 안된다면 다음과 같이 처리해보자.</p>
<ul>
<li>browser에서 login이 되어 있다면, logout을 한다.</li>
<li>아니면, 아래와 같이 setting을 변경하고 해본다.</li>
</ul>
</li>
</ul>
<p><a id="figure--"></a></p>
<figure><img src="./img/login_setting.png" width="400px" height="300px"/>
</figure>

<ul>
<li>[4] 결과화면</li>
<li>아래와 같이 auth token을 받는다.</li>
</ul>
<p><a id="figure--"></a></p>
<figure><img src="./img/login_token_success.png" width="400px" height="300px"/>
</figure>

<h3 id="사물인증-token-받기">사물인증 token 받기</h3>
<ul>
<li>login을 정상적으로 하면 authtoken을 받는데, 이 값은 login 인증이다. 우리는  browser에서 사물에관한 정보를 설정했는데, 이 정보를 이용하거나, 데이터를 추가하기 위해선 인증token을 받아야한다.. 이게 사물 인증 token이라는 것이다. login과정에서 얻은 token으로 사물인증 token을 얻어야 한다.</li>
<li>사물 인증 token에서 필요한 정보가 있다. site id와 thing name이다. 이것은 접속했던 S-brightics에서 알수 있다.</li>
</ul>
<p><a id="figure--"></a></p>
<figure><img src="./img/thing_token.png" width="400px" height="300px"/>
</figure>

<ul>
<li>
<p>이제 get방식으로 접속해보자. URL은 다음과 같다.sites/site아이디/things/thing이름</p>
<div class="note">
<p><a href="https://61.75.178.52:28088/v1.1/sites/C000000003/things/T0000000000102/module/http/itaThingAuthCode?msgHeaderType=J">https://61.75.178.52:28088/v1.1/sites/C000000003/things/T0000000000102/module/http/itaThingAuthCode?msgHeaderType=J</a></p>
<p><a href="https://61.75.178.52:28088/v1.1/sites/C000000003/things/PnC_SMARTWATERCARE.PNC0000/module/http/itaThingAuthCode?msgHeaderType=J">https://61.75.178.52:28088/v1.1/sites/C000000003/things/PnC_SMARTWATERCARE.PNC0000/module/http/itaThingAuthCode?msgHeaderType=J</a></p>
</div>
</li>
<li>
<p>site id는 BASIC_SITE가 아닌 C000000003을 입력하는게 맞다. thing이름은 PnC_SMartwatercare~~대신에 T0000000000102를 넣는게 맞는지는 모르겠다.</p>
</li>
<li>
<p>Header에는 위에서 login token을 사용한다.</p>
<div class="note">
<p>X-CSRF-TOKEN: UL QRdHqLsYSbpuu2wlwf3yP9lJF0kebS+9cVj9oLGWqjpqNaIjKIK8 yul1GQO0WIDCOtmIPweELYojFo5napvNbg==</p>
</div>
</li>
</ul>
      
      </div>
        
  
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
    
     
  

  

  </div>
</div>  

<script src="/js/URI.js" type="text/javascript"></script>
<script src="/js/page.js" type="text/javascript"></script>
</body>
</html>
